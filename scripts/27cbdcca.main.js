"use strict";var tripData={locations:[{id:"la1",title:"Los Angeles",time:"2 days",map:{lat:34.0204989,lng:-118.3117325,zoom:11}},{id:"vegas",title:"Las Vegas",time:"1 night",map:{lat:36.125,lng:-115.175,zoom:10}},{id:"canyon",title:"Death Valley / Grand Canyon / Yosemite (night @ Curry Village)",time:"1 day + 1 night",map:{lat:37.737683,lng:-119.572073,zoom:10}},{id:"sf",title:"San Francisco",time:"3 days",map:{lat:37.77493,lng:-122.41942,zoom:10}},{id:"coast1",title:"Come back to LA through the coast",time:"to update",map:{lat:35.7373676,lng:-120.1404361,zoom:7}}]};!function(a,b,c){function d(a){return String(a).replace(/[&<>"'\/]/g,function(a){return l[a]})}function e(a,b,c){k.push({location:a,author:b,comment:c})}function f(b){return!a.trim(b.html())}function g(b,c,e){e=d(e);var f='<div class="suggestion animated fadeIn"><div class="suggestion-author">'+c+"</div><p>"+e+"</p></div>";a("#"+b+" .suggestion-list").append(f),a("#"+b+" .empty-suggestion").remove()}var h=!0,i=a("#trip-step-template").html(),j=b.render(i,c);a("#target").html(j).addClass("animated fadeIn");var k=new Firebase("https://travelsuggestion.firebaseio.com/"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};k.on("child_added",function(b){g(b.val().location,b.val().author,b.val().comment),h&&(a(".suggestion-list").each(function(){f(a(this))&&a(this).append('<p class="empty-suggestion">No suggestion yet, be the first! :)</p>')}),a(".loading").addClass("hidden"),a(".suggestion-list").removeClass("hidden").addClass("animated fadeInUp"))}),a(".btn-suggest").click(function(){var b,c=a(this).data("trip-step"),d=a("#input-"+c).val();sessionStorage.getItem("author-name")?(b=sessionStorage.getItem("author-name"),e(c,b,d),a("#"+c+" .empty-suggestion").remove(),a("#input-"+c).val("")):(a("#modal-name").modal("show"),a("#btn-save-name").click(function(){b=a("#input-author-name").val(),sessionStorage.setItem("author-name",b),e(c,b,d),a("#"+c+" .empty-suggestion").remove(),a("#modal-name").modal("hide")}))})}(jQuery,Mustache,tripData);